angular.module("angular-markdown-editor-templates",[]).run(["$templateCache",function(t){t.put("angular-markdown-template.html",'<div class="markdown-editor"><ul class="markdown-editor__actions"><li ng-click="markdownEditorCtrl.action(\'bold\')"><i class="ame-bold"></i></li><li ng-click="markdownEditorCtrl.action(\'italic\')"><i class="ame-italic"></i></li><li ng-click="markdownEditorCtrl.action(\'strikethrough\')"><i class="ame-strikethrough"></i></li><li ng-click="markdownEditorCtrl.action(\'heading\')"><i class="ame-header"></i></li><li ng-click="markdownEditorCtrl.action(\'bullets\')"><i class="ame-list-ul"></i></li><li ng-click="markdownEditorCtrl.action(\'indent\')"><i class="ame-indent"></i></li><li ng-click="markdownEditorCtrl.action(\'code\')"><i class="ame-code"></i></li><li ng-click="markdownEditorCtrl.action(\'link\')"><i class="ame-link"></i></li><li ng-click="markdownEditorCtrl.action(\'quote\')"><i class="ame-quote-right"></i></li><li ng-click="markdownEditorCtrl.preview = !markdownEditorCtrl.preview" ng-show="markdownEditorCtrl.showdownEnabled" ng-class="{enabled: markdownEditorCtrl.preview}">Preview</li></ul><div class="markdown-editor__editorarea"><div ng-class="{nopreview: !markdownEditorCtrl.preview}"><textarea ng-model="markdownEditorCtrl.ngModel"></textarea></div><div ng-if="markdownEditorCtrl.showdownEnabled" ng-show="markdownEditorCtrl.preview" ng-bind-html="markdownEditorCtrl.getHTML()"></div></div></div>')}]),function(){function t(){return{restrict:"E",templateUrl:"../src/angular-markdown-template.html",controller:n,controllerAs:"markdownEditorCtrl",scope:!0,bindToController:{ngModel:"="},link:function(t,n){e=n.find("textarea")[0]}}}function n(t){this.preview=!1,this.showdownEnabled="undefined"!=typeof showdown,this.action=function(t){this.ngModel=a[t](this.ngModel,r())},this.getHTML=function(){return this.showdownEnabled?t.trustAsHtml(o.makeHtml(this.ngModel)):""}}function r(){return{start:e.selectionStart,end:e.selectionEnd}}angular.module("angular-markdown-editor",["ngSanitize","angular-markdown-editor-templates"]).directive("markdownEditor",t);var e;if("undefined"!=typeof showdown)var o=new showdown.Converter;n.$inject=["$sce"];var a={bold:function(t,n){return l.surraund(t,n.start,n.end-n.start,"**","**")},italic:function(t,n){return l.surraund(t,n.start,n.end-n.start,"*","*")},bullets:function(t,n){return l.startLinesWith(t,n.start,n.end,"* ")},heading:function(t,n){return l.startLinesWith(t,n.start,n.end,"#")},strikethrough:function(t,n){return l.surraund(t,n.start,n.end-n.start,"--","--")},indent:function(t,n){return l.startLinesWith(t,n.start,n.end,"	")},quote:function(t,n){return l.startLinesWith(t,n.start,n.end,"> ")}},l={surraund:function(t,n,r,i,e){var o=t.substr(n,r);return[t.substr(0,n),i?i:"",o,e?e:"",t.substr(n+r)].join("")},startLinesWith:function(t,n,r,i){var e=l.indexes(t.substr(n,r-n),"\n",n),o=t.substr(0,n).lastIndexOf("\n")+1;t=[t.substr(0,o),i,t.substr(o)].join("");for(var a=0;a<e.length;a++)t=[t.substr(0,i.length*(a+1)+e[a]+1),i,t.substr(i.length*(a+1)+e[a]+1)].join("");return t},indexes:function(t,n,r){var e=[];for(i=0;i<t.length;++i)t.substring(i,i+n.length)==n&&e.push(i+r);return e}}}();